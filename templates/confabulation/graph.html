{% for p in participant_graphs %}
<h3>{{p.name}}</h3>
<div class="graph small_graph" id="graph_{{p.name}}"></div>
{% endfor %}
<h3>All stories</h3>
<div class="graph" id="graph1"></div>

<script type="text/javascript">

 // create an array with edges

{% for p in participant_graphs %}
 var nodes_{{p.name}} = new vis.DataSet([
     {{ p.nodes }}
 ]);

 // reuse this data
 var edges = new vis.DataSet([
     {{ p.edges }}
 ]);
 // create a network
 var container_{{p.name}} = document.getElementById('graph_{{p.name}}');

 // provide the data in the vis format
 var data_{{p.name}} = {
     nodes: nodes_{{p.name}},
     edges: edges,
 };
 var options_{{p.name}} = {
     layout: {
         improvedLayout: false,
     },
     groups:{
         useDefaultGroups: true,
         {{p.group}}
    }
 };

 // initialize your network!
 var network = new vis.Network(container_{{p.name}}, data_{{p.name}}, options_{{p.name}});
 {% endfor %}


 /* create an array with nodes
  * var nodes = new vis.DataSet([
  *     {% for s in node_list %}
  *     {id: {{s.id}},
  *      label: '{{s.label}}',
  *      url: '{{s.url}}',
  *      group: '{{s.group}}',
  *     },
  *     {% endfor %}
  * ]);

  * // create a network
  * var container = document.getElementById('graph1');

  * // provide the data in the vis format
  * var data = {
  *     nodes: nodes,
  *     edges: edges,
  * };
  * var options = {
  *     layout: {
  *         improvedLayout: false,
  *     },
  *     groups:{
  *        useDefaultGroups: true,
  *        {% for p in participants %}
  *        {{ p.name }}:{
  *            color: '{{p.color}}',
  *            font: '25px arial black',
  *            shape: 'dot',
  *            size: 40,
  *        },
  *        {% endfor %}
  *    }
  * };

  * // initialize your network!
  * var network = new vis.Network(container, data, options);
  */
 network.on("selectNode", function (params) {
     if (params.nodes.length === 1) {
         var node = nodes.get(params.nodes[0]);
         window.open(node.url, '_blank');
     }
 });

</script>
